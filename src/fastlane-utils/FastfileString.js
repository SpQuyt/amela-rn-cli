const FastFileString = "# ======================================================================================\n# =================================Need to replace======================================\n# ======================================================================================\nteams_url = \"\"\ncert_output_folder = \"\"\nios_app_folder_name = \"\"\napp_identifier_dev = \"\"\napp_identifier_stg = \"\"\napp_identifier_prod = \"\"\n\n# ======================================================================================\n# =================================DO NOT CHANGE========================================\n# ======================================================================================\ncert_output_folder_filepath = File.expand_path(cert_output_folder)\nxcodeprojPath = \"./ios/#{ios_app_folder_name}.xcodeproj\"\nxcworkspacePath = \"./ios/#{ios_app_folder_name}.xcworkspace\"\nlink_diawi_ios = \"\"\nlink_diawi_android = \"\"\ndiawi_token = \"7LaS855GzhMyf8iUB7oGjnoTkzn9ReOeFKd2CBQ2Do\"\nENV_DEV = \"development\"\nENV_STG = \"staging\"\nENV_PROD = \"production\"\nusername = \"info@amela.vn\"\nteam_id = \"A934T35MUC\"\n\n# ======================================================================================\n# =================================Android==============================================\n# ======================================================================================\nlane :build_android do |options|\n  env = options[:env] || ENV_DEV\n  gradle(\n    task: \"clean\", project_dir: 'android/'\n  )\n  if env == ENV_DEV\n    gradle(\n      task: \"assemble\",\n      flavor: \"Dev\",\n      build_type: \"Release\", \n      project_dir: 'android/'\n    )\n  elsif env == ENV_STG\n    gradle(\n      task: \"assemble\",\n      flavor: \"Staging\",\n      build_type: \"Release\", \n      project_dir: 'android/'\n    )\n  else\n  end\nend\n\nlane :upload_diawi_android do |options|\n  env = options[:env] || ENV_DEV\n  file_path = lane_context[SharedValues::GRADLE_APK_OUTPUT_PATH]\n  diawi(\n      token: diawi_token,\n      file:  file_path,\n    )\n  link_diawi_android = lane_context[SharedValues::UPLOADED_FILE_LINK_TO_DIAWI]\n  puts \"\\n#####################\\n\"\nend\n\nlane :notify_ms_team_android do |options|\n  env = options[:env] || ENV_DEV\n  env_var = \"\"\n  if env == ENV_DEV\n    env_var = \"[Development]\"\n  elsif env == ENV_STG\n    env_var = \"[Staging]\"\n  elsif env == ENV_PROD\n    env_var = \"[Production]\"\n  else\n    env_var = \"[Development]\"\n  end\n  teams(\n    title: \"#{env_var} New App Version [Android] (#{ios_app_folder_name})\",\n    message: \"App's successfully released!\",\n    facts:[\n      {\n        \"name\"=>\"Latest 3 commits\",\n        \"value\"=>changelog_from_git_commits(\n          commits_count: 3,\n          pretty: \"- (%ae) %s\",\n        )\n      },\n      {\n        \"name\"=>\"Android\",\n        \"value\"=>link_diawi_android\n      }\n  ],\n  teams_url: teams_url\n    )\nend\n\n# ======================================================================================\n# ======================================iOS=============================================\n# ======================================================================================\nlane :build_ios do |options|\n  env = options[:env] || ENV_DEV\n  app_identifier = \"\"\n  app_scheme = \"\"\n  output_directory = \"./ios/ipa_builds_#{env}\"\n  filename_mobileprovision = \"#{ios_app_folder_name}_#{env}.mobileprovision\"\n  mobileprovision = \"#{cert_output_folder_filepath}/#{filename_mobileprovision}\"\n  code_signing_identity = \"iOS Development\"\n  if env == ENV_DEV\n    app_identifier = app_identifier_dev\n    app_scheme = \"#{ios_app_folder_name} DEV\"\n  elsif env == ENV_STG\n    app_identifier = app_identifier_stg\n    app_scheme = \"#{ios_app_folder_name} STG\"\n  else\n  end\n\n  get_provisioning_profile(\n    development: true,\n    force: true,\n    app_identifier: app_identifier,\n    username: username,\n    team_id: team_id,\n    filename: filename_mobileprovision,\n    output_path: cert_output_folder_filepath\n  )\n\n  update_code_signing_settings(\n    profile_name: \"#{app_identifier} Development\",\n    path: xcodeprojPath,\n    bundle_identifier: app_identifier,\n    team_id: team_id,\n    code_sign_identity: \"Apple Development\",\n    use_automatic_signing: false,\n  )\n\n  build_app(scheme: app_scheme,\n          workspace: xcworkspacePath,\n          export_method: \"development\",\n          include_bitcode: false,\n          export_options: {\n            uploadBitcode: false,\n            uploadSymbols: true,\n            compileBitcode: false,\n          },\n          clean: false,\n          output_directory: output_directory)\nend\n\nlane :upload_diawi_ios do |options|\n  env = options[:env] || ENV_DEV\n  output_directory = \"./ios/ipa_builds_#{env}\"\n  file_path = \"#{output_directory}/#{ios_app_folder_name}.ipa\"\n  \n  diawi(\n    token: diawi_token,\n    file:  file_path,\n  )\n  link_diawi_ios = lane_context[SharedValues::UPLOADED_FILE_LINK_TO_DIAWI]\n  puts \"\\n#####################\\n\"\nend\n\nlane :notify_ms_team_ios do |options|\n  env = options[:env] || ENV_DEV\n  env_var = \"\"\n  if env == ENV_DEV\n    env_var = \"[Development]\"\n  elsif env == ENV_STG\n    env_var = \"[Staging]\"\n  elsif env == ENV_PROD\n    env_var = \"[Production]\"\n  else\n    env_var = \"[Development]\"\n  end\n  teams(\n    title: \"#{env_var} New App Version [iOS] (#{ios_app_folder_name})\",\n    message: \"App's successfully released!\",\n    facts:[\n      {\n        \"name\"=>\"Latest 3 commits\",\n        \"value\"=>changelog_from_git_commits(\n          commits_count: 3,\n          pretty: \"- (%ae) %s\",\n        )\n      },\n      {\n        \"name\"=>\"iOS\",\n        \"value\"=>link_diawi_ios\n      },\n  ],\n  teams_url: teams_url\n  )\nend\n\n# ======================================================================================\n# =================================Android + iOS========================================\n# ======================================================================================\nlane :build do |options|\n  env = options[:env] || ENV_DEV\n  build_ios env:options[:env]\n  build_android env:options[:env]\nend\n\nlane :upload_diawi do |options|\n  env = options[:env] || ENV_DEV\n  upload_diawi_ios env:options[:env]\n  upload_diawi_android env:options[:env]\nend\n\nlane :notify_ms_team do |options|\n  env = options[:env] || ENV_DEV\n  env_var = \"\"\n  if env == ENV_DEV\n    env_var = \"[Development]\"\n  elsif env == ENV_STG\n    env_var = \"[Staging]\"\n  elsif env == ENV_PROD\n    env_var = \"[Production]\"\n  else\n    env_var = \"[Development]\"\n  end\n  teams(\n    title: \"#{env_var} New App Version (#{ios_app_folder_name})\",\n    message: \"App's successfully released!\",\n    facts:[\n      {\n        \"name\"=>\"Latest 3 commits\",\n        \"value\"=>changelog_from_git_commits(\n          commits_count: 3,\n          pretty: \"- (%ae) %s\",\n        )\n      },\n      {\n        \"name\"=>\"iOS\",\n        \"value\"=>link_diawi_ios\n      },\n      {\n        \"name\"=>\"Android\",\n        \"value\"=>link_diawi_android\n      }\n  ],\n    teams_url: teams_url\n  )\nend\n\n# ======================================================================================\n# =====================================Execution========================================\n# ======================================================================================\nlane :release_ios do |options|\n  build_ios env:options[:env]\n  upload_diawi_ios env:options[:env]\n  notify_ms_team_ios env:options[:env]\nend\n\nlane :release_android do |options|\n  build_android env:options[:env]\n  upload_diawi_android env:options[:env]\n  notify_ms_team_android env:options[:env]\nend\n\nlane :release do |options|\n  build env:options[:env]\n  upload_diawi env:options[:env]\n  notify_ms_team env:options[:env]\nend\n\nerror do |lane, exception|\n  teams(\n    title: \"⛔️ Failed to build\",\n    message: \"Your latest change is failed to build!\",\n    facts:[\n      {\n        \"name\"=>\"Error details\",\n        \"value\"=>exception\n      },\n    ],\n   teams_url: teams_url\n  )\nend";

module.exports = FastFileString;
